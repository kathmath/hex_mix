//FUNCTIONS
//VALIDATE USER INPUT
//verify valid: 1-9 or A-F & 3 or 6 characters long
//consider using standard HTML5 form validation. using pattern ^[a-fA-F0-9]{6}$ bc case insensitive is not a valid pattern
var validate_input = function(str, id) {
    var valid_hex = /^[a-f0-9]{6}$/i;
    if (!valid_hex.test(str)) {
        document.getElementById(id).className = "invalid";
        var errorMessage = "Please enter a valid hex code. Valid hex values are 6 characters long and contain the numbers 1-9 and/or letters A-F";
        element.appendChild(errorMessage);
        return false;
    } else {
        document.getElementById(id).className = "valid";
        return true;
    }
};

//TRANSFORM USER INPUT (string to array of int)
//make input letters uppercase & convert string to array
var input_array = function(str) {
    var str_cap = str.toUpperCase();
    var arr = str_cap.split("");
    return arr;
};

//convert any letters to numbers
var lett_to_num = function(arr) {
    var arr = arr;
    for (var i = 0; i < arr.length; i++) {
        if (arr[i] === "A") {
            arr[i] = 10;
        } else if (arr[i] === "B") {
            arr[i] = 11;
        } else if (arr[i] === "C") {
            arr[i] = 12;
        } else if (arr[i] === "D") {
            arr[i] = 13;
        } else if (arr[i] === "E") {
            arr[i] = 14;
        } else if (arr[i] === "F") {
            arr[i] = 15;
        } else {
            arr[i] = arr[i];
        }
    }
    return arr;
};

//convert strings in array to integers 
var int_array = function(arr) {
    var arr = arr;
    for (var i = 0; i < arr.length; i++) {
        arr[i] = parseInt(arr[i], 10);
    }
    return arr;
};

//MIX COLORS
//mix colors - multiply elements, convert "mixed" array to string
var mixed_color = function(arr1, arr2, percent) {
    var arr = [];
    var percent = percent / 100;
    for (var i = 0; i < arr1.length; i++) {
        arr[i] = Math.round(percent * arr1[i] + (1 - percent) * arr2[i]);
    }
    return arr;
};

//convert any 2-digit numbers to letters
var num_to_lett = function(arr) {
    var arr = arr;
    for (var i = 0; i < arr.length; i++) {
        if (arr[i] === 10) {
            arr[i] = "A";
        } else if (arr[i] === 11) {
            arr[i] = "B";
        } else if (arr[i] === 12) {
            arr[i] = "C";
        } else if (arr[i] === 13) {
            arr[i] = "D";
        } else if (arr[i] === 14) {
            arr[i] = "E";
        } else if (arr[i] === 15) {
            arr[i] = "F";
        } else {
            arr[i] = arr[i];
        }
    }
    return arr;
};

//convert array to string
var arr_to_str = function(arr) {
    var arr = arr;
    var str = arr.join("");
    //convert back to string
    return str;
};

function find_color() {
    //get colors from user & validate
    var user_red = document.getElementById("user_red").value;
    //validate_input(user_red);
    var user_blue = document.getElementById("user_blue").value;
    //validate_input(user_blue);
    var user_blue = document.getElementById("user_green").value;
    //validate_input(user_green);
    //use user input colors, mix 
    var user_color = user_red + user_green + user_blue;
    //put colors into html elements
    var background_color = function(color, id) {
        document.getElementById(id).style.backgroundColor = "#" + color;
        document.getElementById(id).innerHTML = "#" + color;
    };
    background_color(user_color, "user_color");
}

function mix() {
    //get colors from user & validate
    var user_input1 = document.getElementById("user_input1").value;
    var check_input1 = validate_input(user_input1, "user_input1");
    var user_input2 = document.getElementById("user_input2").value;
    var check_input2 = validate_input(user_input2, "user_input2");
    //use user input colors, mix 
    var color1 = int_array(lett_to_num(input_array(user_input1)));
    var color2 = int_array(lett_to_num(input_array(user_input2)));
    var color3 = arr_to_str(num_to_lett(mixed_color(color1, color2, 75)));
    var color4 = arr_to_str(num_to_lett(mixed_color(color1, color2, 50)));
    var color5 = arr_to_str(num_to_lett(mixed_color(color1, color2, 25)));
    //put colors into html elements
    var background_color = function(color, id) {
        document.getElementById(id).style.backgroundColor = "#" + color;
        document.getElementById(id).innerHTML = "#" + color;
    };
    background_color(user_input1.toUpperCase(), "color1_chip");
    background_color(user_input2.toUpperCase(), "color2_chip");
    background_color(color3, "color3_chip");
    background_color(color4, "color4_chip");
    background_color(color5, "color5_chip");
}